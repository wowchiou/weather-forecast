(function(e){function t(t){for(var a,r,i=t[0],u=t[1],s=t[2],l=0,f=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==c[i]&&(a=!1)}a&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},c={app:0},o=[];function i(e){return u.p+"js/"+({error:"error",weather:"weather"}[e]||e)+"."+{error:"bff08fda",weather:"4ab25cde"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={error:1,weather:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({error:"error",weather:"weather"}[e]||e)+"."+{error:"9e3cc05d",weather:"441458c1"}[e]+".css",c=u.p+a,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var s=o[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===c))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){s=f[i],l=s.getAttribute("data-href");if(l===a||l===c)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],d.parentNode.removeChild(d),n(o)},d.href=c;var b=document.getElementsByTagName("head")[0];b.appendChild(d)})).then((function(){r[e]=0})));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=c[e]=[t,n]}));t.push(a[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var f=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",f.name="ChunkLoadError",f.type=a,f.request=r,n[1](f)}c[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/weather-forecast/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0a7d":function(e,t,n){"use strict";n("89ce")},"107c":function(e,t,n){},2203:function(e,t,n){"use strict";n("94c5")},"2f7a":function(e,t,n){},5406:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r=(n("d3b7"),n("3ca3"),n("ddb0"),n("5502")),c=n("6c02"),o="WEATHER_DARK_MODE",i="WEATHER_CITY",u={class:"material-icons","data-test":"icon"},s={props:{icon:{type:String,required:!0}},setup:function(e){return function(t,n){return Object(a["x"])(),Object(a["i"])("span",u,Object(a["H"])(e.icon),1)}}},l=(n("ec9e"),n("d959")),f=n.n(l);const d=f()(s,[["__scopeId","data-v-461cb472"]]);var b=d,j=b,h=function(e){return Object(a["A"])("data-v-34862c3f"),e=e(),Object(a["y"])(),e},m=h((function(){return Object(a["j"])("div",{class:"ball"},null,-1)})),p=[m],v={props:{active:{type:Boolean,required:!0}},setup:function(e){return function(t,n){return Object(a["x"])(),Object(a["i"])("div",{class:Object(a["r"])(["switch-btn",{active:e.active}]),"data-test":"switch-btn"},p,2)}}};n("f37d");const O=f()(v,[["__scopeId","data-v-34862c3f"]]);var g=O,w=g,y={class:"flex justify-center items-center"},x={setup:function(e){var t=Object(a["C"])(!1);function n(){t.value=!t.value,r(t.value),t.value?localStorage.setItem(o,"on"):localStorage.setItem(o,"off")}function r(e){e?document.querySelector("html").classList.add("dark"):document.querySelector("html").classList.remove("dark")}return Object(a["v"])((function(){var e=localStorage.getItem(o);if(e)"on"===e&&(t.value=!0);else{var n=new Date,a=n.getHours();t.value=a<6||a>=18}r(t.value)})),function(e,r){return Object(a["x"])(),Object(a["i"])("div",y,[Object(a["l"])(Object(a["I"])(j),{"data-test":"dark-sun",class:"text-3xl mr-2",icon:"wb_sunny"}),Object(a["l"])(Object(a["I"])(w),{"data-test":"dark-switch",active:t.value,onClick:n},null,8,["active"]),Object(a["l"])(Object(a["I"])(j),{"data-test":"dark-moon",class:"text-3xl ml-2",icon:"nightlight_round"})])}}};n("66aa");const E=f()(x,[["__scopeId","data-v-3f8c5e3a"]]);var _=E,k=_,W=function(e){return Object(a["A"])("data-v-f3bd9298"),e=e(),Object(a["y"])(),e},I={class:"flex justify-between items-center"},S=W((function(){return Object(a["j"])("h1",{class:"text-5xl font-bold text-left"},"天氣",-1)})),T={setup:function(e){return function(e,t){var n=Object(a["E"])("router-link");return Object(a["x"])(),Object(a["i"])("header",I,[Object(a["l"])(n,{"data-test":"header-link",to:{name:"home"}},{default:Object(a["K"])((function(){return[S]})),_:1}),Object(a["l"])(Object(a["I"])(k),{"data-test":"dark-mode-switch"})])}}};n("b57a");const A=f()(T,[["__scopeId","data-v-f3bd9298"]]);var C=A,F=C,D=function(e){return Object(a["A"])("data-v-1ff4e6d2"),e=e(),Object(a["y"])(),e},N={class:"fixed top-0 left-0 w-full h-full flex justify-center items-center z-50 bg-blue-400 dark:bg-gray-900"},H=D((function(){return Object(a["j"])("div",{class:"lds-circle"},[Object(a["j"])("div")],-1)})),P=[H];function R(e,t){return Object(a["x"])(),Object(a["i"])("div",N,P)}n("76c2");const M={},L=f()(M,[["render",R],["__scopeId","data-v-1ff4e6d2"]]);var V=L,B=V,K={class:"max-w-3xl w-11/12 m-auto pt-5 pb-20 text-white"},q={setup:function(e){var t=Object(c["c"])(),n=Object(r["b"])(),o=n.state,i=n.dispatch,u=Object(a["e"])((function(){return o.loader}));return Object(a["v"])((function(){Promise.all([i("fetchWeatherForecast"),i("fetchWeekWeather")]).catch((function(e){console.log(e),t.push({name:"error",params:{message:"Network error, 請稍後再試！"}})})).finally((function(){i("showLoader",!1)}))})),function(e,t){var n=Object(a["E"])("router-view");return Object(a["x"])(),Object(a["i"])("div",K,[Object(a["l"])(Object(a["I"])(F),{"data-test":"app-header"}),Object(a["l"])(n,null,{default:Object(a["K"])((function(e){var t=e.Component;return[Object(a["l"])(a["c"],{name:"slide-fade",mode:"out-in"},{default:Object(a["K"])((function(){return[(Object(a["x"])(),Object(a["g"])(Object(a["F"])(t)))]})),_:2},1024)]})),_:1}),(Object(a["x"])(),Object(a["g"])(a["b"],{to:"#portal-loader"},[Object(a["I"])(u)?(Object(a["x"])(),Object(a["g"])(Object(a["I"])(B),{key:0,"data-test":"app-loader"})):Object(a["h"])("",!0)]))])}}};n("2203");const z=q;var J=z,U=(n("7db0"),n("f5b5")),Y=(n("99af"),function(e){return Object(a["A"])("data-v-352d0d3d"),e=e(),Object(a["y"])(),e}),G={class:"input-wrap"},Q=Y((function(){return Object(a["j"])("option",{value:""},"-- 請選擇城市 --",-1)})),X=["value"],Z={setup:function(e){var t=Object(c["c"])();function n(e){var n=e.target.value;if(n){var a=localStorage.getItem(i);a?-1===a.indexOf(n)&&localStorage.setItem(i,"".concat(a,"/").concat(n)):localStorage.setItem(i,n),t.push({name:"weather",params:{city:n}})}}return function(e,t){return Object(a["x"])(),Object(a["i"])("div",G,[Object(a["j"])("select",{class:"flex-1 text-3xl text-center","data-test":"city-selector",onChange:n},[Q,(Object(a["x"])(!0),Object(a["i"])(a["a"],null,Object(a["D"])(Object(a["I"])(U),(function(e){return Object(a["x"])(),Object(a["i"])("option",{key:e,value:e,"data-test":"city-options"},Object(a["H"])(e),9,X)})),128))],32)])}}};n("61fc");const $=f()(Z,[["__scopeId","data-v-352d0d3d"]]);var ee=$,te=ee,ne=(n("ac1f"),n("1276"),n("a434"),n("a15b"),n("f9e6")),ae={class:"remove-btn"},re={class:"relative z-10"},ce={class:"flex justify-between items-end"},oe={class:"text-4xl"},ie={"data-test":"city-name"},ue={class:"text-6xl","data-test":"weather-t"},se={class:"flex justify-between items-center mt-5"},le={class:"flex justify-start items-center"},fe={class:"w-14 h-14 mr-2 flex justify-start items-center"},de=["src"],be={"data-test":"weather-wx"},je={class:"text-3xl","data-test":"weather-pop"},he={props:{isEdit:{type:Boolean}},setup:function(e){var t=Object(r["b"])(),n=t.state,c=Object(ne["a"])({weatherForecast:n.weatherForecast}),o=c.getWeatherPic,u=c.getWeatherValue,s=Object(a["C"])(localStorage.getItem(i));function l(e){s.value.splice(e,1),0===s.value.length?(localStorage.removeItem(i),s.value=null):localStorage.setItem(i,s.value.join("/"))}return s.value&&(s.value=s.value.split("/")),function(t,n){var r=Object(a["E"])("router-link");return Object(a["x"])(),Object(a["g"])(a["d"],{tag:"ul",name:"slide-card",appear:"",class:Object(a["r"])(["mt-5",{active:e.isEdit}])},{default:Object(a["K"])((function(){return[(Object(a["x"])(!0),Object(a["i"])(a["a"],null,Object(a["D"])(s.value,(function(e,t){return Object(a["x"])(),Object(a["i"])("li",{key:e,class:"weather-list","data-test":"weather-list"},[Object(a["j"])("div",ae,[Object(a["l"])(Object(a["I"])(j),{icon:"remove",class:"remove-icon","data-test":"remove-button",onClick:function(e){return l(t)}},null,8,["onClick"])]),Object(a["l"])(r,{"data-test":"weather-list-link",to:{name:"weather",params:{city:e}}},{default:Object(a["K"])((function(){return[Object(a["j"])("div",re,[Object(a["j"])("div",ce,[Object(a["j"])("p",oe,[Object(a["j"])("span",ie,Object(a["H"])(e),1)]),Object(a["j"])("p",ue,Object(a["H"])(Object(a["I"])(u)(e,"T"))+"℃ ",1)]),Object(a["j"])("div",se,[Object(a["j"])("p",le,[Object(a["j"])("span",fe,[Object(a["j"])("img",{class:"m-h-11/12 m-w-11/12 w-full h-hull","data-test":"weather-pic",src:Object(a["I"])(o)(Object(a["I"])(u)(e,"Wx",1))},null,8,de)]),Object(a["j"])("span",be,Object(a["H"])(Object(a["I"])(u)(e,"Wx")),1)]),Object(a["j"])("p",je," 降雨率 "+Object(a["H"])(Object(a["I"])(u)(e,"PoP6h"))+"% ",1)])])]})),_:2},1032,["to"])])})),128))]})),_:1},8,["class"])}}};n("0a7d");const me=he;var pe=me,ve=pe,Oe={"data-test":"home",class:"home"},ge={class:"mt-5"},we={key:0,"data-test":"empty-text",class:"empty-text"},ye={setup:function(e){var t=Object(r["b"])(),n=t.state,c=Object(a["C"])(!1),o=Object(a["e"])((function(){return localStorage.getItem(i)&&0!==n.weatherForecast.length}));return function(e,t){return Object(a["x"])(),Object(a["i"])("div",Oe,[Object(a["j"])("div",ge,[Object(a["l"])(Object(a["I"])(te)),Object(a["I"])(o)?(Object(a["x"])(),Object(a["g"])(Object(a["I"])(ve),{key:1,isEdit:c.value},null,8,["isEdit"])):(Object(a["x"])(),Object(a["i"])("p",we," 請選擇城市 "))]),Object(a["j"])("div",{"data-test":"edit-button",class:Object(a["r"])(["edit-btn",{active:c.value}]),onClick:t[0]||(t[0]=function(e){return c.value=!c.value})},[Object(a["l"])(Object(a["I"])(j),{class:"text-5xl",icon:"edit"})],2)])}}};n("73ba");const xe=f()(ye,[["__scopeId","data-v-7f256948"]]);var Ee=xe,_e=Ee,ke=[{path:"/",name:"home",component:_e},{path:"/weather/:city",name:"weather",beforeEnter:function(e,t,n){var a=U.find((function(t){return t===e.params.city}));a||n({name:"error",params:{message:"Can not find ".concat(e.params.city,".")}}),n()},props:!0,component:function(){return n.e("weather").then(n.bind(null,"00a1"))}},{path:"/:pathMatch(.*)*",name:"error",props:!0,component:function(){return n.e("error").then(n.bind(null,"30f0"))}}],We=Object(c["a"])({history:Object(c["b"])("/weather-forecast/"),routes:ke,scrollBehavior:function(e,t,n){return n||{top:0}}}),Ie=We,Se=n("5530"),Te=(n("d81d"),n("159b"),n("bc3a")),Ae=n.n(Te),Ce="CWB-4A297EE8-1726-481D-8F80-4E6D8479710D",Fe=Ae.a.create({baseURL:"https://opendata.cwb.gov.tw/api",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}}),De={getWeatherForecast:function(){return Fe.get("/v1/rest/datastore/F-D0047-089?Authorization=".concat(Ce))},getWeekWeather:function(){return Fe.get("/v1/rest/datastore/F-D0047-091?Authorization=".concat(Ce))},getSunrise:function(e){return Fe.get("https://opendata.cwb.gov.tw/api/v1/rest/datastore/A-B0062-001?Authorization=".concat(Ce,"&locationName=臺北市&dataTime=").concat(e))}},Ne=function(e){var t=Object.assign({loader:!0,weatherForecast:[],weekWeatherForecast:[]},e),n={getCityWeather:function(e){return function(t){return e.weatherForecast.find((function(e){return e.locationName===t}))}},getCityWeekWeather:function(e){return function(t){return e.weekWeatherForecast.find((function(e){return e.locationName===t}))}}},a={SET_LOADER:function(e,t){e.loader=t},SET_SUNRISE:function(e,t){e.sunrise=t},SET_WEATHER_FORECAST:function(e,t){e.weatherForecast=t},SET_WEEK_WEATHER_FORECAST:function(e,t){e.weekWeatherForecast=t}},c={showLoader:function(e,t){var n=e.commit;n("SET_LOADER",t)},fetchWeatherForecast:function(e){var t=e.commit;return De.getWeatherForecast().then((function(e){var n=He(e.data.records.locations[0].location);t("SET_WEATHER_FORECAST",n)})).catch((function(e){throw e}))},fetchWeekWeather:function(e){var t=e.commit;return De.getWeekWeather().then((function(e){var n=He(e.data.records.locations[0].location);t("SET_WEEK_WEATHER_FORECAST",n)})).catch((function(e){throw e}))}},o={modules:{},state:t,getters:n,mutations:a,actions:c};return Object(r["a"])(o)};function He(e){return e.map((function(e){var t={};return e.weatherElement.forEach((function(e){t[e.elementName]=e})),Object(Se["a"])(Object(Se["a"])({},e),{},{weatherElement:t})}))}var Pe=Ne();n("ba8c"),n("c1c3"),n("a72e");Object(a["f"])(J).use(Pe).use(Ie).mount("#app")},"61fc":function(e,t,n){"use strict";n("cf82")},"66aa":function(e,t,n){"use strict";n("ddd2")},"73ba":function(e,t,n){"use strict";n("2f7a")},7460:function(e,t,n){},"76c2":function(e,t,n){"use strict";n("7460")},"89ce":function(e,t,n){},"94c5":function(e,t,n){},b57a:function(e,t,n){"use strict";n("107c")},ba8c:function(e,t,n){},c1c3:function(e,t,n){},cf82:function(e,t,n){},ddd2:function(e,t,n){},ec9e:function(e,t,n){"use strict";n("5406")},ef31:function(e,t,n){},f37d:function(e,t,n){"use strict";n("ef31")},f5b5:function(e){e.exports=JSON.parse('["基隆市","臺北市","新北市","桃園市","新竹市","新竹縣","苗栗縣","臺中市","彰化縣","南投縣","雲林縣","嘉義市","嘉義縣","臺南市","高雄市","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","連江縣","金門縣"]')},f9e6:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("2909");n("99af"),n("ac1f"),n("5319"),n("7db0"),n("d3b7"),n("d81d"),n("a9e3");function r(e){var t=e.weatherForecast,n=e.weekWeatherForecast,r={earlyMorning:"凌晨",morning:"白天",night:"夜晚"},c="https://www.cwb.gov.tw/V8/assets/img/weather_icons/weathers/svg_icon/";function o(e,t){var n=r.earlyMorning,a=r.morning,o=r.night,i=new Date,u=i.getHours(),s=u<6||u>=18?"night":"day";return t===n||t===o?s="night":t===a&&(s="day"),"".concat(c).concat(s,"/").concat(e,".svg")}function i(e){var t=new Date(e.replace(/-/g,"/"));return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hours:t.getHours()}}function u(e){var t,n=r.earlyMorning,a=r.morning,c=r.night,o=i(e),u=o.day===(new Date).getDate()?"今日":"".concat(o.day,"日"),s=o.hours;return t=0<=s&&s<6?n:6<=s&&s<18?a:c,{day:u,status:t}}function s(e,n,a){if(t){var r=t.find((function(t){return t.locationName===e})),c=r.weatherElement[n].time[0];return a?c.elementValue[a].value:c.elementValue[0].value}}function l(e,n){if(t){var a=t.find((function(t){return t.locationName===e}));return a.weatherElement[n]}}function f(e,t,a,r){if(n){var c=n.find((function(t){return t.locationName===e})),o=c.weatherElement[t];return"undefined"===typeof a?o:r?o.time[a].elementValue[r].value:o.time[a].elementValue[0].value}}function d(e,t){if(n){var a=n.find((function(t){return t.locationName===e}));return a.weatherElement[t]}}function b(e,t,n){var r=Math.max.apply(Math,Object(a["a"])(e.time.map((function(e){return Number(e.elementValue[0].value)})))),c=Math.min.apply(Math,Object(a["a"])(t.time.map((function(e){return Number(e.elementValue[0].value)})))),o=Number(e.time[n].elementValue[0].value),i=Number(t.time[n].elementValue[0].value),u=(i-c)/(r-c)*100,s=(o-i)/(r-c)*100;return{left:u,width:s||10}}return{getWeatherPic:o,getDayStatus:u,getTemperatureBar:b,getWeatherTime:i,getWeatherValue:s,getWeatherElement:l,getWeekWeatherValue:f,getWeekWeatherElement:d}}}});
//# sourceMappingURL=app.55b2eb4e.js.map